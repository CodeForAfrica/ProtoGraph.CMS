<div class="row">
  <div class="col-sm-6" style="margin-left: auto; margin-right: auto;">
    <h1>Page Manager</h1>
    <hr/>
    <% if @data.first.blank? %>
        <div class="hint">No rows yet</div>
    <% else %>
      <table class="table table-lg table-responsive">
        <tbody>
          <% @data.each do |ref_category| %>
            <tr>
              <td style="border: 0px;">
                <% if ref_category.name_html.present? %>
                  <%= ref_category.name_html.html_safe %>
                <% else %>
                    <%= ref_category.name %>
                <% end %>
                <div class="hint"><%= ref_category.updator.name %></div>
              </td>
              <td style="border: 0px;text-align: right">
                  <% if ref_category.vertical_page.present? %>
                  <%= link_to "Vertical Page", edit_account_site_page_path(@account, @site, ref_category.vertical_page)%>
                  <% end %>
              </td>
              <td style="border: 0px;text-align: right">
                <%= link_to "Navigation", account_site_ref_category_site_vertical_navigations_path(@account, @site, ref_category) %>
                    &nbsp;&nbsp;&nbsp;&nbsp;
              </td>
              <td style="border: 0px;text-align: right">
                <% if ref_category.pages.count > 1 %>
                  <%= link_to 'x', account_site_ref_category_path(@account, @site, ref_category), method: :delete, data: { confirm: 'Are you sure?' }, input_html: {"disabled": true} %>
                <% else %>
                  <%= link_to 'x', "#", style: "color: #d3d3d3;","data-title" => "You cannot delete this vertical as it has associated pages", "data-toggle" => "tooltip", "data-placement" => "bottom" %>
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>

    <% end %>
  </div>
  <div class="col-sm-2">
      <%= simple_form_for(@instance, url: account_site_ref_categories_path(@account, @site), method: :post) do |f| %>
      <%= f.error_notification %>
      <%= f.hidden_field :genre, value: "series" %>
      <%= f.hidden_field :site_id, value: @site.id %>

      <div class="form-inputs">
        <%= f.input :name, required: true, minlength: 3 , maxlength: 15, hint: "Choose carefully. Once set, you cannot change the name." %>
        <% unless @site.is_english %>
          <%= f.input :english_name, required: true, minlength: 3 , maxlength: 15, hint: "This is used for url management." %>
        <% end %>
        <%= f.input :name_html, as: :text, label: "Brand the vertical", hint: "Use HTML (span tag) to add CSS. Note, the length of the series cannot be more than 15 characters.", required: true, minlength: 3 , maxlength: 50 %>
      </div>
      <div class="form-actions">
          <%= f.button :submit, value: "Add a vertical", class: "btn btn-light" %>
      </div>
      <% end %>
  </div>
</div>

<script type="text/javascript">
  $(document).on("turbolinks:load", function(){
    $('[data-toggle="tooltip"]').tooltip();
  });
</script>