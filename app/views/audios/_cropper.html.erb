<div class="modal-dialog modal-lg" role="document">
  <div class="modal-content">
    <div class="modal-header">
      <div class='modal-title'>Crop Audio</div>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <audio src="<%= @audio.audio.url %>" id="audio-player" controls>
        Your web browser does not support playing audio
      </audio>
      <%= simple_form_for ([@account, @audio_variation]) do |f| %>
        <%= f.input :audio_id,as: :hidden, input_html: {value: @audio.id} %>
        <% %w[start_time end_time].each do |attribute| %>
          <%= f.input attribute %>
        <% end %>
      <% end %>
    </div>
    <div class='modal-footer'>
      <input type="submit" value="Crop" form="new_audio_variation" class="btn btn-outline">
    </div>
  </div>
</div>

<script type="text/javascript">
 function duration(selectorId){
   var audio = document.getElementById(selectorId);
   if(audio.readyState > 0){
     seconds = parseInt(audio.duration);
     return(seconds)
   }
 }

 function setMinMax(){
   var maxDuration = String(duration("audio-player"))
   $("#audio_variation_start_time")
     .attr("max", maxDuration)
     .attr("min", "0")

   $("#audio_variation_end_time")
     .attr("max", maxDuration)
     .attr("min", "0")
 }
</script>
