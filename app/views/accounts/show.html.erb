<div class="sixteen wide column">
  <div class="ui grid">
    <div class="left floated three wide column">
      <span class='ui huge header'><%= @account.username %></span>
    </div>
    <div class="right floated four wide column right aligned">
      <a id='formAddButton' class='ui primary basic button mini'>Create a new Folder</a>
    </div>
  </div>
  <div class='one-br-space'></div>
  <table class="ui very basic table">
    <thead>
      <tr>
        <th>Folder Name</th>
        <th># Cards</th>
        <th># Streams</th>
        <th class="collapsing">Last modified at</th>
        <th>by</th>
        <th class="collapsing"></th>
      </tr>
    </thead>
    <tbody>
      <% @folders.each do |folder| %>
        <% if folder.id.present? %>
          <tr>
            <td>
              <i class='icon folder steelblue'></i>
              <%= link_to folder.name.titleize, [@account, folder] %>
            </td>

            <td>
              <%= "#{folder.view_casts.count} <span class='hint'>#{'card'.pluralize(folder.view_casts.count)}</span>".html_safe %>
            </td>
            <td>
              <%= "#{folder.streams.count} <span class='hint'>#{'stream'.pluralize(folder.streams.count)}</span>".html_safe %>
            </td>
            <td class="hint">
              <%= "#{time_ago_in_words(folder.updated_at)} ago" %>
            </td>
            <td class="hint collapsing">
              <%= folder.updator.name %>
            </td>
            <td  class='hint'>
              <%= link_to "Edit", edit_account_folder_path(@account, folder) %>
            </td>
          </tr>
        <% end %>
      <% end %>
    </tbody>
  </table>
</div>

<%= render partial: "folders/form" %>
<script type="text/javascript">

$(document).on("turbolinks:load", function () {
  $('#formAddButton').on('click',function () {
    $('#new-folder')
      .modal({
        closable: false,
      }).modal('show');
    })
});
</script>

<% if @open_modal %>
  <script type="text/javascript">
    $('#new-folder')
      .modal({
        closable: false,
      }).modal('show');
  </script>
<% end %>