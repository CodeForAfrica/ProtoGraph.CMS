<div class='ui grid'>
    <div class="left floated six wide column" style="background: #fafafa;">
        <h3>Prepare the article</h3>
        <h4>Tags</h4>
        <h4>Brand images for social media</h4>
        <% if @article.id.present? %>
            <% if @image.present? %>
                <% if @article.og_image_variation_id.present? %>
                <% else %>
                    <%= link_to "Create a Social Image", "#", id: "facebook", class: "ui button primary" %>
                <% end %>
                <% if @article.twitter_image_variation_id.present? %>
                <% end %>
                <% if @article.instagram_image_variation_id.present? %>
                <% else %>
                    <div class='one-br-space'></div>
                    <%#= link_to "Create a Instagram Image", "#", id: "facebook", class: "ui button primary" %>
                <% end %>
            <% else %>
                <div class='hint'>Please upload a Cover Image to continue</div>
            <% end %>
        <% end %>

    </div>
    <div class="right floated ten wide column">
        <%= simple_form_for([@account, @folder, @article]) do |f| %>
            <%= f.input :account_id, as: :hidden, input_html: {value: @account.id} %>
            <% if @article.id.nil? %>
                <%= f.input :created_by, as: :hidden, input_html: {value: current_user.id} %>
            <% end %>
            <%= f.input :updated_by, as: :hidden, input_html: {value: current_user.id} %>
            <%= f.input :url, as: :string, placeholder: "*Copy paste the URL of the story", label: false, required: true %>
            <%= f.input :genre, placeholder: "Genre of the story e.g. Opinion, Analysis, Wire, Breaking, Exclusive, etc.", label: false %>
            <%= f.input :title, placeholder: "Copy paste the Title", label: false %>
            <table>
                <tr>
                    <% if @article.cover_image_id.blank? %>
                        <td><%= image_tag "cover.png", width: "35px;" %></td>
                        <td>&nbsp;</td>
                        <td>
                            <!-- # Ensure that the cover_image updates -->
                                <%= f.fields_for :cover_image do |cover_image| %>
                                    <%= cover_image.input :image, label: false %>
                                <% end %>
                        </td>
                        <td class="hint">&nbsp; Upload cover image</td>
                    <% else %>
                        <h6> Cover Image </h6>
                        <%= image_tag(@article.cover_image_variation.image_url, class: "ui tiny centered image") %>
                        <br/>
                        <%= simple_form_for [@account, @folder, @article] do |f| %>
                          <%= f.error_notification %>
                          <%= f.input :cover_image_id, as: :hidden, input_html: {value: nil} %>
                          <div style="text-align: center;">
                            <%= f.submit "Remove Image".html_safe, class: "ui mini button" %>
                          </div>
                        <% end %>
                    <% end %>
                </tr>
            </table>
            <br/>

            <%= f.input :content, placeholder: "Copy paste the Story...", label: false, input_html: {rows: 24} %>
            <%= f.submit "Save", class: "ui button primary" %>
        <% end %>
    </div>
</div>


<div class="ui large modal" id="facebookCropperModal"> <i class="close icon"></i>
  <%= render partial: "images/cropper", locals: {mode: "facebook"} %>
</div>

<script type="text/javascript">
    $(document).ready(function(){
        $('#facebook').on('click', function (e) {
            $('#facebookCropperModal').modal({closable: false}).modal('show');
            e.stopPropagation()
        });
    });

</script>

<%= render partial: "images/cropper_js" %>

