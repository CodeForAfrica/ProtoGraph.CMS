<style>
    .form-group{margin-bottom: 0px !important;}
</style>
<div class="row-fluid">
    <%= simple_form_for([@account, @folder, @article]) do |f| %>
            <div class="container">
                <div class="row">
                    <div class="col-sm-11">
                        <%= f.input :account_id, as: :hidden, input_html: {value: @account.id} %>
                        <% if @article.id.nil? %>
                            <%= f.input :created_by, as: :hidden, input_html: {value: current_user.id} %>
                        <% end %>
                        <%= f.input :updated_by, as: :hidden, input_html: {value: current_user.id} %>
                        <% if @article.id.nil? %>
                            <%= f.input :url, as: :string, placeholder: "*Copy paste the URL of the story", required: true, label: false, input_html: {style: "border: 0px !important; font-size: 12px; padding-left: 0px; padding-right: 0px; margin-bottom: 0px !important;wid"}, autofocus: true %>
                        <% else %>
                            <p style="margin-bottom: 10px; color: gray;"><%= best_in_place @article, :url,url: [@account, @folder, @article], html_attrs: {style: "margin-bottom: 10px; color: gray;width: 100%"} %></p>
                        <% end %>
                        <% if @article.id.nil? %>
                            <%= f.input :title, as: :text, placeholder: "*Copy paste the headline", required: true, label: false, input_html: {style: "border: 0px !important; font-size: 32px; font-weight: bold; color: black; padding-left: 0px; padding-right: 0px; margin-top: 0px !important;"}%>
                        <% else %>
                            <h1 style="border: 0px !important; font-size: 32px; font-weight: bold; color: black; padding-left: 0px; padding-right: 0px; margin-top: 0px !important;"><%= best_in_place @article, :title,url: [@account, @folder, @article] , as: :textarea, html_attrs: {style: "border: 0px !important; font-size: 32px; font-weight: bold; color: black; padding-left: 0px; padding-right: 0px; margin-top: 0px !important;"} %></h1>
                        <% end %>
                    </div>
                    <div class="col-sm-3">

                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-16">
                        <br/>
                                <% if @article.cover_image_id.blank? %>
                                    <!-- # Ensure that the cover_image updates -->
                                    <p class="hint" style="margin-bottom: 0px;">Upload cover image</p>
                                    <%= f.fields_for :cover_image do |cover_image| %>
                                        <%= cover_image.input :image, label: false, placeholder: "Upload cover image", input_html: {style: "width: 100%; background: lightgray; min-height: 400px; cursor: pointer; padding: 160px 0px 0px 40%;", onchange: "readURL(this);"}%>
                                    <% end %>
                                <% else %>
                                    <%= image_tag(@article.cover_image_variation.image_url, class: "img-fluid") %>
                                    <br/>
                                    <%= link_to "Remove Cover Image", remove_cover_image_account_folder_article_path(@account, @folder, @article), method: :put, style: "float: right;" %>
                                    <br/>
                                <% end %>

                        <br/>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-7">
                        <% if @article.id.nil? %>
                            <%= f.input :content, as: :text, hint: "Cannot be longer than 300 characters.", input_html:  {style: "font-size: 12px;", rows: '5', maxlength: "300"}, label: "Summary of the article" %>
                        <% else %>
                            <p style="margin-bottom: 10px; color: gray;">
                                <%= best_in_place @article, :content,url: [@account, @folder, @article] , as: :textarea, html_attrs: {style: "margin-bottom: 10px; color: gray;"} %>
                            </p>
                        <% end %>

                    </div>
                    <div class="col-sm-4">
                        <%= f.input :author, placeholder: "e.g. John Doe", label: "1. <span style='color: red;'>*</span>Byline".html_safe, input_html: {style: "font-size: 12px;"} %>
                        <br/>
                        <%= f.input :article_datetime, label: "2. <span style='color: red;'>*</span>When was the article published?".html_safe, input_html: {style: "font-size: 12px;"} %>
                        <br/>
                        <%= f.input :genre, placeholder: "E.g. Opinion, Analysis, Wire, Breaking, Exclusive, etc.", label: "3. <span style='color: red;'>*</span>Choose a genre of the story".html_safe, hint: "Cannot be longer than 16 characters. Note, you cannot change it once you save.", input_html: {style: "font-size: 12px;"}, maxlength: 16, disabled: @article.id.present? ? true : false %>
                        <%= f.submit "Save", class: @article.id.present? ? "btn btn-outline" : "btn btn-primary" %>
                    </div>
                </div>


            </div>
    <% end %>
</div>

<script type="text/javascript">
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                $(input).css('background', 'transparent url('+e.target.result +') left top no-repeat');
            }
            reader.readAsDataURL(input.files[0]);
        }
    }
</script>